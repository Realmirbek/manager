<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <div class="container">
        <h1>–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h1>



        <input type="text" id="searchInput" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω—É" onkeyup="searchUsers()">

        <div class="lists">
            <div class="not-contacted">
                <h2>üî¥ –ù–µ —Å–≤—è–∑–∞–ª–∏—Å—å</h2>
                <table>
                    <tr><th>–ò–º—è</th><th>–¢–µ–ª–µ—Ñ–æ–Ω</th><th>–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</th><th>–°—Ç–∞—Ç—É—Å</th><th>–î–µ–π—Å—Ç–≤–∏–µ</th></tr>
                    {% for candidate in not_contacted %}
                    <tr>
                        <td><a href="{% url 'candidate_detail' candidate.id %}">{{ candidate.name }}</a></td>
                        <td><a href="tel:{{ candidate.phone }}">üìû</a></td>
                        <td>{{ candidate.direction }}</td>
                        <td>{{ candidate.is_deleted }}</td>
                        <td>üü° –î—É–º–∞–µ—Ç</td>
                        <td>
                            <a href="{% url 'edit_candidate' candidate.id %}" class="btn">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                            <a href="{% url 'mark_contacted' candidate.id %}" class="btn">‚úÖ –°–≤—è–∑–∞–ª–∏—Å—å</a>
                            <a href="{% url 'delete_permanently' 'candidate' candidate.id %}" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞?');">‚ùå –£–¥–∞–ª–∏—Ç—å</a>


                        </td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="5">–ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</td></tr>
                    {% endfor %}
                </table>
            </div>

            <div class="contacted">
                <h2>‚úÖ –°–≤—è–∑–∞–ª–∏—Å—å</h2>
                <table>
                    <tr><th>–ò–º—è</th><th>–¢–µ–ª–µ—Ñ–æ–Ω</th><th>–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</th><th>–°—Ç–∞—Ç—É—Å</th><th>–ú–µ–Ω—Ç–æ—Ä</th><th>–î–µ–π—Å—Ç–≤–∏–µ</th></tr>
                    {% for candidate in contacted %}
                    <tr>
                        <td><a href="{% url 'candidate_detail' candidate.id %}">{{ candidate.name }}</a></td>
                        <td><a href="tel:{{ candidate.phone }}">üìû</a></td>
                        <td>{{ candidate.direction }}</td>
                        <td>üü° –î—É–º–∞–µ—Ç</td>
                        <td>{{ candidate.mentor.name|default:"–ù–µ—Ç –º–µ–Ω—Ç–æ—Ä–∞" }}</td>

                        <td>
                            <a href="{% url 'edit_candidate' candidate.id %}" class="btn">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                            <a href="{% url 'assign_mentor' candidate.id %}" class="btn">üéì –ù–∞–∑–Ω–∞—á–∏—Ç—å –º–µ–Ω—Ç–æ—Ä–∞</a>
                            <a href="{% url 'mark_status' candidate.id 'passed_test' %}" class="btn">‚úîÔ∏è –ü—Ä–æ—à–µ–ª —Ç–µ—Å—Ç</a>
                            <a href="{% url 'delete_permanently' 'candidate' candidate.id %}" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞?');">‚ùå –£–¥–∞–ª–∏—Ç—å</a>

                        </td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="6">–ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</td></tr>
                    {% endfor %}
                </table>

                <div class="passed_test">
                <h2>–ü—Ä–æ—à–µ–ª —Ç–µ—Å—Ç</h2>
                <table>
                    <tr>
                        <th>–ò–º—è</th><th>–¢–µ–ª–µ—Ñ–æ–Ω</th><th>–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</th>><th>–ú–µ–Ω—Ç–æ—Ä</th><th>–î–µ–π—Å—Ç–≤–∏–µ</th>
                    </tr>
                    {% for candidate in  passed_test_candidates%}
                    <tr>
                        <td><a href="{% url 'candidate_detail' candidate.id %}">{{ candidate.name }}</a></td>
                        <td><a href="tel:{{ candidate.phone }}">üìû</a> |
<!--                            <a href="https://wa.me/{{ candidate.phone }}" target="_blank">üí¨ WhatsApp</a>-->
                        </td>
                        <td>{{ candidate.direction }}</td>
                        <td>{{ candidate.mentor.name|default:"–ù–µ—Ç –º–µ–Ω—Ç–æ—Ä–∞" }}</td>
                        <td>
                            <a href="{% url 'edit_candidate' candidate.id %}" class="btn">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                            <a href="{% url 'assign_mentor' candidate.id %}" class="btn">üéì –ù–∞–∑–Ω–∞—á–∏—Ç—å –º–µ–Ω—Ç–æ—Ä–∞</a>
                            <a href="{% url 'delete_permanently' 'candidate' candidate.id %}" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞?');">‚ùå –£–¥–∞–ª–∏—Ç—å</a>
                        </td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="6">–ù–µ—Ç —Å—Ç–∞–∂–µ—Ä–æ–≤ —Å —ç—Ç–∏–º —Å—Ç–∞—Ç—É—Å–æ–º</td></tr>
                    {% endfor %}
                </table>
            </div>
        </div>

        <a href="{% url 'add_candidate' %}" class="btn">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞–∂–µ—Ä–∞</a>
        <a href="{% url 'add_mentor' %}" class="btn">‚ûï –î–æ–±–∞–≤–∏—Ç—å –º–µ–Ω—Ç–æ—Ä–∞</a>
        <a href="{% url 'mentor_list' %}" class="btn">üë®‚Äçüè´ –°–ø–∏—Å–æ–∫ –º–µ–Ω—Ç–æ—Ä–æ–≤</a>
        <a href="{% url 'statistics' %}" class="btn">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
        <a href="{% url 'action_history' %}" class="btn">üìú–ò—Å—Ç–æ—Ä–∏—è</a>
    </div>

    <script>
        function searchUsers() {
            let input = document.getElementById("searchInput").value.toLowerCase();
            let rows = document.querySelectorAll("table tr");

            rows.forEach((row, index) => {
                if (index === 0) return;
                let text = row.innerText.toLowerCase();
                row.style.display = text.includes(input) ? "" : "none";
            });
        }
    </script>
</body>
</html>
